<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SyncVent — Ventilação Mecânica (educacional)</title>

  <style>
    :root{
      --bg:#f6f8ff;
      --panel:#ffffff;
      --panel2:#f2f5ff;
      --text:#0b1220;
      --muted:#41516b;
      --line:#d9e2f3;
      --chip:#eef3ff;
      --blue:#2563eb;
      --blue2:#1d4ed8;
      --shadow: 0 18px 45px rgba(18,36,80,.12);
      --radius:16px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      background: var(--bg);
      color: var(--text);
    }

    /* Splash */
    #splash{
      position: fixed;
      inset: 0;
      background:
        radial-gradient(800px 500px at 20% 10%, rgba(37,99,235,.20), transparent 60%),
        radial-gradient(900px 600px at 85% 20%, rgba(37,99,235,.12), transparent 55%),
        var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
      transition: opacity .25s ease;
      pointer-events:auto;
    }
    #splash.hide{ opacity:0; pointer-events:none; }

    .splashCard{
      width:min(980px, 92vw);
      border:1px solid var(--line);
      border-radius: calc(var(--radius) + 10px);
      background: linear-gradient(180deg, rgba(37,99,235,.06), rgba(255,255,255,.78));
      box-shadow: var(--shadow);
      padding: 26px 22px;
    }
    .splashTop{
      display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .brand{ display:flex; gap:12px; align-items:center; }
    .logo{
      width:42px; height:42px; border-radius:12px;
      background: linear-gradient(135deg, var(--blue), rgba(37,99,235,.35));
      box-shadow: 0 10px 22px rgba(37,99,235,.18);
    }
    .brand h1{ margin:0; font-size:22px; letter-spacing:.2px; }
    .brand .tag{ margin-top:2px; color: var(--muted); font-size:13px; }

    .btn{
      border:1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
      transition: transform .05s ease, background .15s ease, border .15s ease;
      user-select:none;
    }
    .btn:hover{ border-color: rgba(37,99,235,.55); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      background: linear-gradient(135deg, var(--blue), var(--blue2));
      border-color: rgba(37,99,235,.65);
      color:#fff;
    }

    .splashBody{
      margin-top:14px;
      border-top:1px solid var(--line);
      padding-top:14px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
    }
    .splashBody p{ margin:0; color: var(--muted); line-height:1.5; font-size:14px; }
    .pillRow{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; align-items:flex-start; }
    .pill{
      background: rgba(37,99,235,.10);
      border:1px solid rgba(37,99,235,.28);
      color: var(--text);
      font-size:12px;
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 900;
      white-space: nowrap;
    }
    @media (max-width: 860px){
      .splashBody{ grid-template-columns: 1fr; }
      .pillRow{ justify-content:flex-start; }
    }

    /* Header */
    header{
      position: sticky;
      top:0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: color-mix(in srgb, var(--bg) 75%, transparent);
      border-bottom: 1px solid var(--line);
    }
    .wrap{ width:min(1180px, 94vw); margin: 0 auto; }
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      padding: 10px 0;
      gap: 12px;
      flex-wrap:wrap;
    }
    .leftTop{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
    .miniLogo{
      width:28px; height:28px; border-radius:10px;
      background: linear-gradient(135deg, var(--blue), rgba(37,99,235,.25));
      box-shadow: 0 8px 18px rgba(37,99,235,.14);
    }
    .titleBlock{ display:flex; flex-direction:column; line-height:1.1; }
    .titleBlock b{ font-size: 14px; letter-spacing:.2px;}
    .titleBlock span{ font-size: 12px; color: var(--muted); margin-top:3px;}

    nav{ display:flex; gap: 8px; flex-wrap:wrap; align-items:center; }
    .tab{
      border:1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 1000;
      cursor:pointer;
      font-size: 13px;
    }
    .tab.active{
      background: rgba(37,99,235,.10);
      border-color: rgba(37,99,235,.40);
    }
    .tab.casos{ padding: 10px 16px; font-size: 14px; }

    main{ padding: 16px 0 28px; }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 980px){
      .grid2{ grid-template-columns: 1fr; }
    }

    .card{
      border:1px solid var(--line);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }
    .card h2{ margin:0; font-size: 16px; letter-spacing:.2px; }
    .sub{ margin:6px 0 0; color: var(--muted); font-size: 13px; line-height:1.4; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .hr{ height:1px; background: var(--line); margin:12px 0; }

    label{
      display:block;
      font-weight: 1000;
      font-size: 12px;
      color: var(--muted);
      margin-bottom:6px;
      letter-spacing:.2px;
      text-transform: uppercase;
    }
    input, select{
      width:100%;
      box-sizing:border-box;
      border-radius: 12px;
      border:1px solid var(--line);
      background: var(--panel2);
      color: var(--text);
      padding: 10px 10px;
      outline: none;
      font-weight: 900;
      font-size: 14px;
    }

    .hide{ display:none !important; }

    .checks{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 780px){
      .checks{ grid-template-columns: 1fr; }
    }
    .checkGroup{
      border:1px solid var(--line);
      background: var(--panel2);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .checkGroup h3{ margin:0 0 8px; font-size: 13px; letter-spacing:.2px; }
    .opt{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding: 6px 0;
      border-top: 1px dashed color-mix(in srgb, var(--line) 70%, transparent);
    }
    .opt:first-of-type{ border-top: none; }
    .opt input{ width:auto; margin-top: 3px; }
    .opt div{ flex:1; }
    .opt b{ display:block; font-size: 13px; }
    .opt span{ display:block; color: var(--muted); font-size: 12px; line-height:1.35; margin-top:2px; }

    .outBox{
      border:1px solid var(--line);
      background: color-mix(in srgb, var(--panel2) 80%, transparent);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .outBox h3{ margin:0 0 8px; font-size: 13px; }
    .outBox .txt{
      color: var(--muted);
      font-size: 13px;
      line-height:1.5;
      white-space:pre-wrap;
    }

    .note{
      border-left: 4px solid rgba(37,99,235,.55);
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(37,99,235,.07);
      color: var(--muted);
      font-size: 13px;
      line-height:1.45;
    }
    .note b{ color: var(--text); }
  </style>
</head>

<body>

  <!-- SPLASH -->
  <div id="splash">
    <div class="splashCard">
      <div class="splashTop">
        <div class="brand">
          <div class="logo"></div>
          <div>
            <h1>SyncVent</h1>
            <div class="tag">Ventilação Mecânica — app educacional (não-prescritor)</div>
          </div>
        </div>
        <div class="splashBtns">
          <!-- Fallback: onclick garante funcionamento mesmo se listener falhar -->
          <button class="btn primary" id="btnEnterSplash" type="button" onclick="window.SyncVentEnter && window.SyncVentEnter()">Entrar</button>
        </div>
      </div>

      <div class="splashBody">
        <p>
          Ferramenta educacional para organizar raciocínio por cenários e por leitura de curvas.
          Não substitui protocolos institucionais nem julgamento clínico.
        </p>
        <div class="pillRow">
          <span class="pill">Casos</span>
          <span class="pill">SARA: calculadoras</span>
          <span class="pill">Assincronias</span>
          <span class="pill">Mecânica</span>
        </div>
      </div>
    </div>
  </div>

  <!-- HEADER -->
  <header>
    <div class="wrap">
      <div class="topbar">
        <div class="leftTop">
          <div class="miniLogo"></div>
          <div class="titleBlock">
            <b>SyncVent</b>
            <span>Compacto primeiro. Expandido só depois da análise.</span>
          </div>
        </div>

        <nav>
          <button class="tab casos active" id="tabCasos" type="button">Casos</button>
          <button class="tab" id="tabAssin" type="button">Assincronias</button>
          <button class="tab" id="tabMec" type="button">Mecânica</button>
          <button class="tab" id="tabSobre" type="button">Sobre</button>
        </nav>
      </div>
    </div>
  </header>

  <main class="wrap">
<!-- ===================== CASOS ===================== -->
<section id="secCasos">
  <div class="card">
    <h2>Casos clínicos</h2>
    <p class="sub">Definições + pontos de atenção + calculadoras (quando aplicável). Sem prescrição.</p>

    <div class="hr"></div>

    <div class="row">
      <div style="flex:1; min-width:280px;">
        <label>Selecione o caso</label>
        <select id="caseSel">
          <option value="">Selecione…</option>
          <option value="sara">SARA (ARDS)</option>
          <option value="sepse">Sepse / Choque séptico</option>
          <option value="dpoc">DPOC (obstrutivo)</option>
          <option value="restritiva">Doença restritiva</option>
          <option value="cardiaca">Cardíaca (edema cardiogênico)</option>
          <option value="obeso">Obeso / OHS</option>
          <option value="neuro">Neuromuscular</option>
          <option value="neurocrit">Neurocrítico (TCE, tumor, etc.)</option>
          <option value="trauma">Trauma</option>
          <option value="tb">Tuberculose (UTI/insuficiência respiratória)</option>
          <option value="pneumo">Pneumotórax (em PPV/VM)</option>
          <option value="desmame">Desmame / TRE (SBT)</option>
          <option value="imt">Treinamento muscular inspiratório na VM (IMT)</option>
        </select>
      </div>
    </div>

    <div class="hr"></div>
    <div id="caseArea" class="outBox">
      <div class="txt">Selecione um caso para abrir definições e pontos de atenção.</div>
    </div>

    <div class="hr"></div>
    <div class="note">
      <b>Uso educacional.</b> Não emite conduta, ajuste ou prescrição. Decisão clínica é da equipe assistente.
    </div>
  </div>
</section>

<!-- ===================== ASSINCRONIAS ===================== -->
<section id="secAssin" class="hide">
  <div class="card">
    <h2>Assincronias — selecione o que você vê</h2>
    <p class="sub">O botão “expandido” só aparece depois de rodar a análise compacta.</p>

    <div class="hr"></div>

    <div class="grid2">
      <div class="card" style="box-shadow:none; background: var(--panel2); border:1px solid var(--line);">
        <label>Contexto (opcional)</label>
        <select id="assinContext">
          <option value="">Sem contexto</option>
          <option value="control">Controlado / mandatória</option>
          <option value="assist">Assistido (A/C, PSV, etc.)</option>
          <option value="wean">Desmame</option>
          <option value="obstruct">Obstrutivo (DPOC/asma)</option>
          <option value="lowC">Baixa complacência (SARA/restritiva)</option>
        </select>

        <div style="height:10px;"></div>

        <label>Ação</label>
        <div class="row">
          <button class="btn primary" id="btnAssinRun" type="button">Rodar análise</button>
          <button class="btn" id="btnAssinClear" type="button">Limpar</button>
        </div>
      </div>

      <div class="card" style="box-shadow:none; background: var(--panel2); border:1px solid var(--line);">
        <label>Notas</label>
        <div class="note" style="margin-top:8px;">
          <b>Regra do motor:</b><br>
          achado → interpretação → hipóteses (sem prescrever ajuste).
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <div class="checks">
      <div class="checkGroup">
        <h3>Pressão × tempo — disparo / início</h3>

        <div class="opt">
          <input type="checkbox" class="assin" value="pt_trigger_delay" id="a_pt_trigger_delay">
          <div>
            <b>Esforço aparece e o ventilador demora a responder</b>
            <span>Atraso de disparo/dificuldade de trigger.</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="pt_double_trigger" id="a_pt_double_trigger">
          <div>
            <b>Dois ciclos quase colados, com pouco tempo expiratório</b>
            <span>Compatível com duplo disparo/empilhamento (confirmar em volume/fluxo).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="pt_press_spike" id="a_pt_press_spike">
          <div>
            <b>Picos/oscilações de pressão no início do ciclo</b>
            <span>Esforço brusco, tosse, artefato ou acoplamento imperfeito.</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="pt_trigger_excess" id="a_pt_trigger_excess">
          <div>
            <b>Ciclos iniciam com esforço mínimo ou sem padrão consistente</b>
            <span>Sugere disparos excessivos / auto-disparo (suspeita).</span>
          </div>
        </div>
      </div>

      <div class="checkGroup">
        <h3>Fluxo × tempo — inspiração / término</h3>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_flow_starvation" id="a_ft_flow_starvation">
          <div>
            <b>Concavidade durante inspiração (demanda maior que entrega)</b>
            <span>Demanda &gt; entrega (modo-dependente).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_notched_insp" id="a_ft_notched_insp">
          <div>
            <b>“Entalhes”/irregularidade durante a inspiração</b>
            <span>Esforços adicionais, tosse ou variabilidade.</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_early_cycle" id="a_ft_early_cycle">
          <div>
            <b>Inspiração termina e o esforço ainda continua</b>
            <span>Ciclagem precoce (assistidos).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_late_cycle" id="a_ft_late_cycle">
          <div>
            <b>Inspiração se mantém quando o paciente já quer expirar</b>
            <span>Ciclagem tardia (assistidos).</span>
          </div>
        </div>
      </div>

      <div class="checkGroup">
        <h3>Fluxo × tempo — expiração</h3>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_exp_incomplete" id="a_ft_exp_incomplete">
          <div>
            <b>Fluxo expiratório não zera antes do próximo ciclo</b>
            <span>Expiração incompleta/air-trapping/auto-PEEP.</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_ineffective_effort" id="a_ft_ineffective_effort">
          <div>
            <b>Esforço em expiração, mas não ocorre disparo</b>
            <span>Esforço inefetivo (auto-PEEP + fraqueza, etc.).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_auto_trigger" id="a_ft_auto_trigger">
          <div>
            <b>Ciclos sem padrão claro de esforço</b>
            <span>Auto-disparo/artefato (vazamento, condensado, sensibilidade).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="ft_reverse_trigger" id="a_ft_reverse_trigger">
          <div>
            <b>Padrão repetitivo: ciclo mecânico seguido de esforço “atrasado”</b>
            <span>Suspeita de reverse triggering (confirmar sequência temporal).</span>
          </div>
        </div>
      </div>

      <div class="checkGroup">
        <h3>Volume × tempo</h3>

        <div class="opt">
          <input type="checkbox" class="assin" value="vt_breath_stacking" id="a_vt_breath_stacking">
          <div>
            <b>Volume não retorna ao baseline antes do próximo ciclo</b>
            <span>Empilhamento (confirmar com ciclos colados/expiração curta).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="vt_leak_suspicion" id="a_vt_leak_suspicion">
          <div>
            <b>Volume expirado muito menor que o inspirado (persistente)</b>
            <span>Vazamento/medição inconsistente (suspeita).</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="vt_variable_vt" id="a_vt_variable_vt">
          <div>
            <b>Variação ampla do volume ciclo a ciclo</b>
            <span>Esforço variável/modos adaptativos/instabilidade de interação.</span>
          </div>
        </div>

        <div class="opt">
          <input type="checkbox" class="assin" value="vt_sawtooth" id="a_vt_sawtooth">
          <div>
            <b>Traçado “serrilhado” no volume durante o ciclo</b>
            <span>Tosse, secreção, artefato ou irregularidade de fluxo.</span>
          </div>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <div class="outBox">
      <h3>Resultado – Assincronias (compacto)</h3>
      <div class="txt" id="assinOut">Selecione os achados e clique em “Rodar análise”.</div>

      <button id="btnAssinExpand" class="btn" style="margin-top:10px; display:none;" type="button">
        Expandido (explicação fisiológica)
      </button>

      <div id="assinExpand" class="hide" style="margin-top:10px;">
        <div class="note">
          <b>Explicação expandida (educacional)</b><br><br>
          <div id="assinExpandText"></div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- ===================== MECÂNICA ===================== -->
<section id="secMec" class="hide">
  <div class="card">
    <h2>Mecânica — selecione o que você vê</h2>
    <p class="sub">Leitura educacional das curvas (achado → interpretação → hipóteses). Expandido aparece após rodar.</p>

    <div class="row">
      <div style="flex:1;min-width:260px;">
        <label>Contexto (opcional)</label>
        <select id="mecContext">
          <option value="">Sem contexto</option>
          <option value="lowC">Baixa complacência (SARA/restritiva)</option>
          <option value="obstruct">Obstrutivo (DPOC/asma/secreção)</option>
          <option value="neuro">Neuromuscular/drive baixo</option>
          <option value="wean">Desmame</option>
        </select>
      </div>
    </div>

    <div class="row" style="margin-top:10px;">
      <button class="btn primary" id="btnMecRun" type="button">Rodar análise</button>
      <button class="btn" id="btnMecClear" type="button">Limpar</button>
    </div>

    <div class="hr"></div>

    <div class="checks">
      <div class="checkGroup">
        <h3>Pressão × tempo</h3>
        <div class="opt">
          <input type="checkbox" class="mec" value="pt_low_comp">
          <div><b>Inclinação reduzida (↑ΔP para pequeno ΔV)</b><span>Sugere baixa complacência.</span></div>
        </div>
        <div class="opt">
          <input type="checkbox" class="mec" value="pt_overdist">
          <div><b>Achatamento no fim da inspiração</b><span>Compatível com redução de complacência em volumes altos.</span></div>
        </div>
        <div class="opt">
          <input type="checkbox" class="mec" value="pt_effort_noise">
          <div><b>Ondulações durante inspiração</b><span>Interferência de esforço/tosse/variabilidade.</span></div>
        </div>
      </div>

      <div class="checkGroup">
        <h3>Fluxo × tempo</h3>
        <div class="opt">
          <input type="checkbox" class="mec" value="ft_exp_slow">
          <div><b>Expiração prolongada</b><span>↑ resistência/tempo constante.</span></div>
        </div>
        <div class="opt">
          <input type="checkbox" class="mec" value="ft_exp_not_zero">
          <div><b>Fluxo não zera antes do próximo ciclo</b><span>Aprisionamento aéreo.</span></div>
        </div>
        <div class="opt">
          <input type="checkbox" class="mec" value="ft_irregular">
          <div><b>Irregularidade/serrilhado</b><span>Secreção/artefato.</span></div>
        </div>
      </div>

      <div class="checkGroup">
        <h3>Volume × tempo</h3>
        <div class="opt">
          <input type="checkbox" class="mec" value="vt_low">
          <div><b>Baixa excursão volumétrica</b><span>Leitura descritiva (interpretar com pressão/fluxo).</span></div>
        </div>
        <div class="opt">
          <input type="checkbox" class="mec" value="vt_stack">
          <div><b>Baseline ascendente</b><span>Empilhamento dinâmico.</span></div>
        </div>
        <div class="opt">
          <input type="checkbox" class="mec" value="vt_leak">
          <div><b>Discrepância insp/exp</b><span>Vazamento/medição.</span></div>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <div class="outBox">
      <h3>Resultado – Mecânica (compacto)</h3>
      <div class="txt" id="mecOut">Selecione os achados e clique em “Rodar análise”.</div>

      <button id="btnMecExpand" class="btn" style="margin-top:10px; display:none;" type="button">
        Expandido (explicação fisiológica)
      </button>

      <div id="mecExpand" class="hide" style="margin-top:10px;">
        <div class="note">
          <b>Explicação expandida (educacional)</b><br><br>
          <div id="mecExpandText"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===================== SOBRE ===================== -->
<section id="secSobre" class="hide">
  <div class="card">
    <h2>Sobre</h2>
    <p class="sub">
      Ferramenta educacional para organizar raciocínio por leitura de curvas ventilatórias.
      Não prescreve conduta ou ajustes.
    </p>
    <div class="hr"></div>
    <div class="note">
      <b>Escopo</b><br>
      • Achados observáveis → interpretação → hipóteses.<br>
      • Integração de pressão, fluxo, volume e contexto clínico.<br>
      • Uso educacional.
    </div>
    <div style="margin-top:10px;color:var(--muted);font-size:12px;">
      © <span id="yearNow"></span> — SyncVent
    </div>
  </div>
</section>

<script>
/* ===================== SyncVent — Script único ===================== */
document.addEventListener("DOMContentLoaded", () => {
  const $ = id => document.getElementById(id);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  /* Splash (fallback garantido) */
  window.SyncVentEnter = () => {
    const s = $("splash");
    if(!s) return;
    s.classList.add("hide");
    setTimeout(()=> s.style.display="none", 300);
  };
  $("btnEnterSplash")?.addEventListener("click", e => {
    e.preventDefault(); window.SyncVentEnter();
  });

  /* Tabs */
  function showTab(t){
    ["Casos","Assin","Mec","Sobre"].forEach(x=>{
      $("sec"+x)?.classList.add("hide");
      $("tab"+x)?.classList.remove("active");
    });
    $("sec"+t).classList.remove("hide");
    $("tab"+t).classList.add("active");
    window.scrollTo({top:0});
  }
  $("tabCasos").onclick = ()=>showTab("Casos");
  $("tabAssin").onclick = ()=>showTab("Assin");
  $("tabMec").onclick   = ()=>showTab("Mec");
  $("tabSobre").onclick = ()=>showTab("Sobre");
  showTab("Casos");

  /* Casos */
  const CASES = {
    sara:`<b>SARA (ARDS)</b><br><ul>
      <li>Heterogeneidade pulmonar e baixa complacência.</li>
      <li>Assincronias podem refletir ↑ drive/desconforto.</li>
    </ul>
    <div class="hr"></div>
    <b>Calculadora P/F</b><br>
    <label>PaO₂</label><input id="pao2">
    <label>FiO₂</label><input id="fio2">
    <button class="btn" onclick="calcPF()">Calcular</button>
    <div id="pfOut"></div>`
  };
  $("caseSel").onchange = ()=> $("caseArea").innerHTML = CASES[$("caseSel").value] || "";
  window.calcPF = ()=>{
    const pa=+($("pao2")?.value||0), fi=+($("fio2")?.value||0);
    if(!pa||!fi) return;
    const pf=Math.round(pa/fi);
    const c=pf>300?"Normal":pf>200?"Leve":pf>100?"Moderada":"Grave";
    $("pfOut").innerHTML=`P/F = <b>${pf}</b> → ${c}`;
  };

  /* Assincronias */
  $("btnAssinRun").onclick = ()=>{
    const a=$$(".assin:checked").map(x=>x.value);
    $("assinOut").innerText = a.length
      ? "Achados:\n• "+a.join("\n• ")+"\n\nHipóteses: mismatch demanda–entrega, ciclagem inadequada ou esforço inefetivo."
      : "Nenhum achado selecionado.";
    $("btnAssinExpand").style.display = a.length?"inline-block":"none";
    $("assinExpandText").innerText =
      "Integração dos achados com contexto, drive e mecânica ao longo do tempo.";
  };
  $("btnAssinClear").onclick = ()=>{
    $$(".assin").forEach(c=>c.checked=false);
    $("assinOut").innerText="Selecione os achados e clique em “Rodar análise”.";
    $("btnAssinExpand").style.display="none";
    $("assinExpand").classList.add("hide");
  };
  $("btnAssinExpand").onclick = ()=> $("assinExpand").classList.toggle("hide");

  /* Mecânica */
  $("btnMecRun").onclick = ()=>{
    const m=$$(".mec:checked").map(x=>x.value);
    $("mecOut").innerText = m.length
      ? "Achados:\n• "+m.join("\n• ")+"\n\nHipóteses: alterações de complacência, resistência e interação."
      : "Nenhum achado selecionado.";
    $("btnMecExpand").style.display = m.length?"inline-block":"none";
    $("mecExpandText").innerText =
      "Leitura integrada de P, V e F, observando tendências temporais.";
  };
  $("btnMecClear").onclick = ()=>{
    $$(".mec").forEach(c=>c.checked=false);
    $("mecOut").innerText="Selecione os achados e clique em “Rodar análise”.";
    $("btnMecExpand").style.display="none";
    $("mecExpand").classList.add("hide");
  };
  $("btnMecExpand").onclick = ()=> $("mecExpand").classList.toggle("hide");

  $("yearNow").innerText = new Date().getFullYear();
});
</script>

</main>
</body>
</html>
