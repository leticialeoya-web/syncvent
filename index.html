<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SyncVent — Ventilação Mecânica (educacional)</title>

<style>
:root{
  --bg:#f6f8ff;
  --panel:#ffffff;
  --panel2:#f2f5ff;
  --text:#0b1220;
  --muted:#41516b;
  --line:#d9e2f3;
  --blue:#2563eb;
  --blue2:#1d4ed8;
  --radius:16px;
  --shadow:0 18px 45px rgba(18,36,80,.12);
  --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}
html,body{margin:0;height:100%;}
body{font-family:var(--sans);background:var(--bg);color:var(--text);}

/* ===== SPLASH ===== */
#splash{
  position:fixed;inset:0;z-index:9999;
  background:radial-gradient(800px 500px at 20% 10%, rgba(37,99,235,.2), transparent 60%),
             radial-gradient(900px 600px at 85% 20%, rgba(37,99,235,.12), transparent 55%),
             var(--bg);
  display:flex;align-items:center;justify-content:center;
}
#splash.hide{opacity:0;pointer-events:none;transition:.3s;}

.splashCard{
  background:var(--panel);
  border-radius:20px;
  border:1px solid var(--line);
  box-shadow:var(--shadow);
  padding:26px;
  width:min(900px,92vw);
}
.brand{display:flex;gap:12px;align-items:center;}
.logo{
  width:42px;height:42px;border-radius:12px;
  background:linear-gradient(135deg,var(--blue),var(--blue2));
}
.btn{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 14px;
  font-weight:800;
  background:var(--panel);
  cursor:pointer;
}
.btn.primary{
  background:linear-gradient(135deg,var(--blue),var(--blue2));
  color:#fff;border:none;
}

/* ===== HEADER ===== */
header{
  position:sticky;top:0;z-index:50;
  background:rgba(246,248,255,.85);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--line);
}
.wrap{width:min(1180px,94vw);margin:auto;}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 0;}
nav{display:flex;gap:8px;flex-wrap:wrap;}
.tab{
  border:1px solid var(--line);
  border-radius:999px;
  padding:8px 14px;
  background:var(--panel);
  font-weight:800;
  cursor:pointer;
}
.tab.active{background:rgba(37,99,235,.12);border-color:rgba(37,99,235,.4);}

main{padding:16px 0 28px;}
.card{
  background:var(--panel);
  border-radius:var(--radius);
  border:1px solid var(--line);
  box-shadow:var(--shadow);
  padding:16px;
}
.hide{display:none;}
.sub{color:var(--muted);font-size:13px;}
.hr{height:1px;background:var(--line);margin:12px 0;}
</style>
</head>

<body>

<!-- ===== SPLASH ===== -->
<div id="splash">
  <div class="splashCard">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1 style="margin:0;">SyncVent</h1>
        <div class="sub">Ventilação Mecânica — app educacional (não-prescritor)</div>
      </div>
    </div>

    <p class="sub" style="margin-top:12px;">
      Ferramenta educacional para organizar raciocínio clínico por leitura de curvas
      e por cenários. Não substitui julgamento clínico nem protocolos institucionais.
    </p>

    <div style="margin-top:16px;">
      <button class="btn primary" id="btnEnter" type="button">Entrar</button>
    </div>
  </div>
</div>

<!-- ===== HEADER ===== -->
<header>
  <div class="wrap">
    <div class="topbar">
      <b>SyncVent</b>
      <nav>
        <button class="tab active" id="tabCasos">Casos</button>
        <button class="tab" id="tabAssin">Assincronias</button>
        <button class="tab" id="tabMec">Mecânica</button>
        <button class="tab" id="tabSobre">Sobre</button>
      </nav>
    </div>
  </div>
</header>

<main class="wrap">

<!-- ===== CASOS ===== -->
<section id="secCasos">
  <div class="card">
    <h2>Casos clínicos</h2>
    <p class="sub">Definições, pontos de atenção e calculadoras educacionais.</p>

    <div class="hr"></div>

    <label>Selecione o caso</label>
    <select id="caseSel">
      <option value="">Selecione…</option>
      <option value="sara">SARA (ARDS)</option>
      <option value="sepse">Sepse / Choque séptico</option>
      <option value="dpoc">DPOC</option>
      <option value="restritiva">Doença restritiva</option>
      <option value="cardiaca">Edema cardiogênico</option>
      <option value="obeso">Obesidade / OHS</option>
      <option value="neuro">Neuromuscular</option>
      <option value="neurocrit">Neurocrítico</option>
      <option value="trauma">Trauma</option>
      <option value="tb">Tuberculose</option>
      <option value="pneumo">Pneumotórax</option>
      <option value="desmame">Desmame / TRE</option>
      <option value="imt">IMT na VM</option>
    </select>

    <div class="hr"></div>
    <div id="caseArea"></div>
  </div>
</section>

<!-- ===== ASSINCRONIAS / MECÂNICA / SOBRE virão na PARTE 2 ===== -->

<!-- ===== ASSINCRONIAS ===== -->
<section id="secAssin" class="hide">
  <div class="card">
    <h2>Assincronias</h2>
    <p class="sub">
      Marque apenas os achados visuais observáveis nas curvas.
      A análise expandida aparece somente após rodar a análise compacta.
    </p>

    <div class="hr"></div>

    <label>Contexto (opcional)</label>
    <select id="assinContext">
      <option value="">Sem contexto</option>
      <option value="control">Controlado / mandatória</option>
      <option value="assist">Assistido (A/C, PSV)</option>
      <option value="wean">Desmame</option>
      <option value="obstruct">Obstrutivo</option>
      <option value="lowC">Baixa complacência</option>
    </select>

    <div style="margin-top:10px;">
      <button class="btn primary" id="btnAssinRun">Rodar análise</button>
      <button class="btn" id="btnAssinClear">Limpar</button>
    </div>

    <div class="hr"></div>

    <!-- PRESSÃO -->
    <div class="card" style="background:var(--panel2);box-shadow:none;">
      <h3>Pressão × tempo</h3>

      <div class="opt">
        <input type="checkbox" class="assin" value="pt_trigger_delay">
        <div>
          <b>Atraso de disparo</b>
          <span>Esforço visível antecede o início da inspiração mecânica.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="pt_double_trigger">
        <div>
          <b>Duplo disparo</b>
          <span>Dois ciclos quase consecutivos, com expiração mínima.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="pt_reverse_trigger">
        <div>
          <b>Esforço após ciclo mecânico (suspeita)</b>
          <span>Ativação inspiratória repetitiva após ciclos mandatórios.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="pt_noise">
        <div>
          <b>Oscilações irregulares</b>
          <span>Ruído por tosse, secreção ou artefato.</span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- FLUXO -->
    <div class="card" style="background:var(--panel2);box-shadow:none;">
      <h3>Fluxo × tempo</h3>

      <div class="opt">
        <input type="checkbox" class="assin" value="ft_starvation">
        <div>
          <b>Concavidade inspiratória</b>
          <span>Demanda inspiratória maior que o fluxo entregue.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="ft_early_cycle">
        <div>
          <b>Ciclagem precoce</b>
          <span>Inspiração termina enquanto o esforço persiste.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="ft_late_cycle">
        <div>
          <b>Ciclagem tardia</b>
          <span>Ventilador mantém inspiração após início do relaxamento.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="ft_ineffective">
        <div>
          <b>Esforço inefetivo</b>
          <span>Esforço visível sem disparo do ventilador.</span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- EXPIRAÇÃO / VOLUME -->
    <div class="card" style="background:var(--panel2);box-shadow:none;">
      <h3>Expiração / Volume</h3>

      <div class="opt">
        <input type="checkbox" class="assin" value="exp_incomplete">
        <div>
          <b>Expiração incompleta</b>
          <span>Fluxo expiratório não retorna a zero.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="vt_stacking">
        <div>
          <b>Empilhamento de volume</b>
          <span>Volume não retorna ao baseline antes do próximo ciclo.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="assin" value="vt_leak">
        <div>
          <b>Discrepância inspiratório/expiratório</b>
          <span>Suspeita de vazamento ou erro de leitura.</span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- SAÍDA -->
    <div class="outBox">
      <h3>Resultado – Assincronias (compacto)</h3>
      <div id="assinOut" class="sub">
        Selecione os achados e clique em “Rodar análise”.
      </div>

      <button id="btnAssinExpand" class="btn" style="margin-top:10px;display:none;">
        Expandido (por achado)
      </button>

      <div id="assinExpand" class="hide" style="margin-top:10px;"></div>
    </div>
  </div>
</section>

<!-- ===== MECÂNICA ===== -->
<section id="secMec" class="hide">
  <div class="card">
    <h2>Mecânica ventilatória</h2>
    <p class="sub">
      Achados descritivos das curvas para interpretação educacional.
    </p>

    <div class="hr"></div>

    <label>Contexto (opcional)</label>
    <select id="mecContext">
      <option value="">Sem contexto</option>
      <option value="lowC">Baixa complacência</option>
      <option value="obstruct">Resistência aumentada</option>
      <option value="neuro">Drive baixo</option>
      <option value="wean">Desmame</option>
    </select>

    <div style="margin-top:10px;">
      <button class="btn primary" id="btnMecRun">Rodar análise</button>
      <button class="btn" id="btnMecClear">Limpar</button>
    </div>

    <div class="hr"></div>

    <!-- PRESSÃO -->
    <div class="card" style="background:var(--panel2);box-shadow:none;">
      <h3>Pressão</h3>

      <div class="opt">
        <input type="checkbox" class="mec" value="low_compliance">
        <div>
          <b>Baixa complacência</b>
          <span>Pequeno ΔV para grande ΔP.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="mec" value="end_insp_flat">
        <div>
          <b>Achatamento no fim da inspiração</b>
          <span>Redução progressiva da complacência.</span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- FLUXO -->
    <div class="card" style="background:var(--panel2);box-shadow:none;">
      <h3>Fluxo</h3>

      <div class="opt">
        <input type="checkbox" class="mec" value="exp_slow">
        <div>
          <b>Expiração lenta</b>
          <span>Tempo constante elevado / resistência aumentada.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="mec" value="flow_irregular">
        <div>
          <b>Serrilhado</b>
          <span>Secreção, condensado ou artefato.</span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- VOLUME -->
    <div class="card" style="background:var(--panel2);box-shadow:none;">
      <h3>Volume</h3>

      <div class="opt">
        <input type="checkbox" class="mec" value="vt_low">
        <div>
          <b>Baixa excursão volumétrica</b>
          <span>Descrição integrada a pressão e fluxo.</span>
        </div>
      </div>

      <div class="opt">
        <input type="checkbox" class="mec" value="vt_leak">
        <div>
          <b>Discrepância inspiratório/expiratório</b>
          <span>Suspeita de vazamento.</span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- SAÍDA -->
    <div class="outBox">
      <h3>Resultado – Mecânica (compacto)</h3>
      <div id="mecOut" class="sub">
        Selecione os achados e clique em “Rodar análise”.
      </div>

      <button id="btnMecExpand" class="btn" style="margin-top:10px;display:none;">
        Expandido (por achado)
      </button>

      <div id="mecExpand" class="hide" style="margin-top:10px;"></div>
    </div>
  </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const $ = id => document.getElementById(id);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  /* ================= SPLASH ================= */
  $("btnEnter").addEventListener("click", () => {
    $("splash").classList.add("hide");
    setTimeout(() => $("splash").style.display = "none", 300);
  });

  /* ================= TABS ================= */
  function showTab(which){
    ["Casos","Assin","Mec","Sobre"].forEach(t=>{
      $("sec"+t).classList.add("hide");
      $("tab"+t).classList.remove("active");
    });
    $("sec"+which).classList.remove("hide");
    $("tab"+which).classList.add("active");
    window.scrollTo({top:0});
  }
  $("tabCasos").onclick = () => showTab("Casos");
  $("tabAssin").onclick = () => showTab("Assin");
  $("tabMec").onclick   = () => showTab("Mec");
  $("tabSobre").onclick = () => showTab("Sobre");

  /* ================= CASOS ================= */
  const CASES = {
    sara: `
      <h3>SARA (ARDS)</h3>
      <p class="sub">
        Insuficiência respiratória hipoxêmica associada à redução de complacência e heterogeneidade pulmonar.
      </p>
      <ul class="sub">
        <li>Curvas refletem mecânica global e podem mascarar comportamento regional.</li>
        <li>Variabilidade ciclo a ciclo sugere instabilidade alveolar.</li>
        <li>Interpretação deve considerar drive e esforço.</li>
      </ul>

      <div class="hr"></div>

      <h4>Calculadora educacional P/F</h4>
      <label>PaO₂ (mmHg)</label>
      <input id="pao2">
      <label>FiO₂ (fração)</label>
      <input id="fio2">
      <button class="btn primary" id="calcPF">Calcular</button>
      <div id="pfOut" class="sub"></div>
    `,
    sepse: `
      <h3>Sepse / Choque séptico</h3>
      <ul class="sub">
        <li>Drive respiratório frequentemente elevado.</li>
        <li>Interação cardiopulmonar influencia curvas.</li>
        <li>Evolução dinâmica exige análise seriada.</li>
      </ul>
    `,
    dpoc: `
      <h3>DPOC</h3>
      <ul class="sub">
        <li>Resistência elevada e expiração prolongada.</li>
        <li>Auto-PEEP favorece esforço inefetivo.</li>
        <li>Empilhamento é frequente.</li>
      </ul>
    `,
    restritiva: `
      <h3>Doença restritiva</h3>
      <ul class="sub">
        <li>Baixa complacência com pressões elevadas.</li>
        <li>Volume reduzido para mesma variação de pressão.</li>
      </ul>
    `,
    cardiaca: `
      <h3>Edema cardiogênico</h3>
      <ul class="sub">
        <li>Hipoxemia com mecânica variável.</li>
        <li>Curvas mudam rapidamente conforme congestão.</li>
      </ul>
    `,
    obeso: `
      <h3>Obesidade / OHS</h3>
      <ul class="sub">
        <li>Complacência de parede reduzida.</li>
        <li>Atelectasia dependente.</li>
      </ul>
    `,
    neuro: `
      <h3>Neuromuscular</h3>
      <ul class="sub">
        <li>Esforço fraco e disparos perdidos.</li>
        <li>Baixa variabilidade ventilatória.</li>
      </ul>
    `,
    neurocrit: `
      <h3>Neurocrítico</h3>
      <ul class="sub">
        <li>Drive instável.</li>
        <li>Auto-disparo e reverse triggering possíveis.</li>
      </ul>
    `,
    trauma: `
      <h3>Trauma</h3>
      <ul class="sub">
        <li>Dor e lesão de parede alteram curvas.</li>
        <li>Grande variabilidade interindividual.</li>
      </ul>
    `,
    tb: `
      <h3>Tuberculose</h3>
      <ul class="sub">
        <li>Heterogeneidade marcada.</li>
        <li>Secreção interfere no fluxo.</li>
      </ul>
    `,
    pneumo: `
      <h3>Pneumotórax</h3>
      <ul class="sub">
        <li>Mudanças abruptas de pressão/volume.</li>
        <li>Curvas não confirmam diagnóstico isoladamente.</li>
      </ul>
    `,
    desmame: `
      <h3>Desmame / TRE</h3>
      <ul class="sub">
        <li>Fadiga progressiva altera sincronia.</li>
        <li>Obstrução limita tolerância.</li>
      </ul>
    `,
    imt: `
      <h3>IMT na VM</h3>
      <ul class="sub">
        <li>Consistência do esforço é central.</li>
        <li>Fadiga aparece como irregularidade.</li>
      </ul>
    `
  };

  $("caseSel").onchange = () => {
    $("caseArea").innerHTML = CASES[$("caseSel").value] || "";
    if($("calcPF")){
      $("calcPF").onclick = () => {
        const pa = Number($("pao2").value);
        const fi = Number($("fio2").value);
        if(pa>0 && fi>0){
          const pf = pa/fi;
          $("pfOut").textContent = "P/F = " + pf.toFixed(0);
        }
      };
    }
  };

  /* ================= ASSINCRONIAS ================= */
  $("btnAssinRun").onclick = () => {
    const ach = $$(".assin:checked").map(c=>c.value);
    if(!ach.length){
      $("assinOut").textContent = "Nenhum achado selecionado.";
      return;
    }
    $("assinOut").textContent =
      "Achados:\n• " + ach.join("\n• ") +
      "\n\nInterpretação educacional: interação paciente–ventilador alterada.";
    $("btnAssinExpand").style.display = "inline-block";
    $("assinExpand").innerHTML = ach.map(a=>`
      <div class="note">
        <b>${a}</b><br>
        • Significado fisiológico do achado.<br>
        • Curva complementar para confirmar.<br>
        • Hipóteses interpretativas possíveis.<br>
        • Situações em que pode enganar.
      </div>
    `).join("");
  };
  $("btnAssinExpand").onclick = () => $("assinExpand").classList.toggle("hide");
  $("btnAssinClear").onclick = () => {
    $$(".assin").forEach(c=>c.checked=false);
    $("assinOut").textContent = "";
    $("assinExpand").innerHTML = "";
    $("btnAssinExpand").style.display="none";
  };

  /* ================= MECÂNICA ================= */
  $("btnMecRun").onclick = () => {
    const ach = $$(".mec:checked").map(c=>c.value);
    if(!ach.length){
      $("mecOut").textContent = "Nenhum achado selecionado.";
      return;
    }
    $("mecOut").textContent =
      "Achados:\n• " + ach.join("\n• ") +
      "\n\nInterpretação educacional: alterações de mecânica ventilatória.";
    $("btnMecExpand").style.display="inline-block";
    $("mecExpand").innerHTML = ach.map(a=>`
      <div class="note">
        <b>${a}</b><br>
        • Relação pressão–fluxo–volume.<br>
        • Mecanismo fisiológico provável.<br>
        • Hipóteses interpretativas.<br>
        • Limitações do achado.
      </div>
    `).join("");
  };
  $("btnMecExpand").onclick = () => $("mecExpand").classList.toggle("hide");
  $("btnMecClear").onclick = () => {
    $$(".mec").forEach(c=>c.checked=false);
    $("mecOut").textContent = "";
    $("mecExpand").innerHTML = "";
    $("btnMecExpand").style.display="none";
  };

  showTab("Casos");
});
</script>

</main>
</body>
</html>
